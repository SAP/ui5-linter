<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"
    xmlns:template="http://schemas.sap.com/sapui5/extension/sap.ui.core.template/1">

    <template:if test="{= ${dataField>RecordType} === 'com.sap.vocabularies.UI.v1.DataFieldForAction'}">
        <template:then>
            <template:if test="{path: 'dataField>', formatter: 'AH.doesActionExist'}">
                <Button
                    id="{parts: [{path: 'dataField>'}, {path: 'facet>'}], formatter: 'AH.getStableIdPartForDatafieldActionButton'}{= ${parameter>/settings/quickVariantSelectionX} ? ${path: 'tabItem>', formatter: 'AH.getSuffixFromIconTabFilterKey'} : ''}{= (${chartItem>}) ? '::chart' : ''}"
                    text="{path: 'dataField>Label', formatter: 'AHModel.format'}"
                    press="{parts: [{path: 'parameter>/settings'}, {path: 'dataField>'}], formatter: 'AH.getAnnotatedActionPress'}"
                    enabled="{parts: [{path: 'dataField>'}, {path: 'facet>'}, {path: 'entityType>'}, {path: 'device>/system/phone'}, {path: 'tabItem>'},{path: 'chartItem>'}], formatter: 'AH.buildAnnotatedActionButtonEnablementExpression'}"
                    class="{parts: [{path: 'dataField>'}, {path: 'facet>'}, {path: 'entityType>'}, {path: 'device>/system/phone'}, {path: 'tabItem>'},{path: 'chartItem>'}], formatter: 'AH.buildAnnotatedActionButtonEnablementExpression'}"
                    type="Transparent"
                    visible="{path: 'dataField>', formatter: 'AH.getBindingForHiddenPath'}">
                    <layoutData>
                        <OverflowToolbarLayoutData priority="{path: 'dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember', formatter: 'AH.getToolbarButtonPriorityFromImportance'}"/>
                    </layoutData>
                    <customData>
                        <core:CustomData key="Type" value="{dataField>RecordType}" />
                        <core:CustomData key="Action" value="{path: 'dataField>Action', formatter: 'AHModel.format'}" />
                        <core:CustomData key="Label" value="{path: 'dataField>Label', formatter: 'AHModel.format'}" />
                        <core:CustomData key="InvocationGrouping" value="{= ${dataField>InvocationGrouping/EnumMember}}"/>
                        <template:with path="dataField>Action" helper="AHModel.gotoFunctionImport" var="action">
                            <core:CustomData key="ActionFor" value="{action>sap:action-for}" />
                        </template:with>
                    </customData>
                </Button>
            </template:if>
        </template:then>
        <template:elseif test="{= ${dataField>RecordType} === 'com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation'}">
            <Button
                id="{parts: [{path: 'dataField>'}, {path: 'facet>'}], formatter: 'AH.getStableIdPartForDatafieldActionButton'}{= ${parameter>/settings/quickVariantSelectionX} ? ${path: 'tabItem>', formatter: 'AH.getSuffixFromIconTabFilterKey'} : ''}{= (${chartItem>}) ? '::chart' : ''}"
                text="{path: 'dataField>Label', formatter: 'AHModel.format'}"
                press="{parts: [{path: 'parameter>/settings'}, {path: 'dataField>'}, {path: 'parameter>/manifest'}], formatter: 'AH.getAnnotatedActionPress'}"
                enabled="{parts: [{path: 'dataField>'}, {path: 'facet>'}, {path: 'entityType>'}, {path: 'device>/system/phone'}, {path: 'tabItem>'}, {path: 'chartItem>'}], formatter: 'AH.buildAnnotatedActionButtonEnablementExpression'}"
                visible="{path: 'dataField>', formatter: 'AH.buildVisibilityExprOfDataFieldForIntentBasedNaviButton'}"
                type="Transparent">
                <layoutData>
                    <OverflowToolbarLayoutData priority="{path: 'dataField>com.sap.vocabularies.UI.v1.Importance/EnumMember', formatter: 'AH.getToolbarButtonPriorityFromImportance'}"/>
                </layoutData>
                <customData>
                    <core:CustomData key="Type" value="{dataField>RecordType}" />
                    <core:CustomData key="SemanticObject" value="{path: 'dataField>SemanticObject', formatter: 'AHModel.format'}" />
                    <core:CustomData key="Action" value="{path: 'dataField>Action', formatter: 'AHModel.format'}" />
                    <core:CustomData key="Label" value="{path: 'dataField>Label', formatter: 'AHModel.format'}" />
                </customData>
            </Button>
        </template:elseif>
    </template:if>
</core:FragmentDefinition>
